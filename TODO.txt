BUGS:

 - richedit jumps up like 20 lines or scrolls past the end find out whats
   going on with that it has to do with when its focused or not
   dont just spam WM_VSCROLL although thats probably the solution

 - style bleed is still happening in RichEdit textBuffers
    - now I want to try adding some zero-width characters and
      styling them with AUTOCOLOR (need to test that AUTOCOLOR even does
      anything on visible text)
 
 - /list shouldn't work on a disconnected server (but guess what)

 - bold/italic/underline toggles don't work
    - colors.go needs a major overhaul 

 - statusBar is just really inconsistent
    - disconnecting from one server makes all servers display "disconnected x_x"

 - draw issue when
    1) open /list from #channel
    2) click to channel list tab
    3) click to server tab

    fixes itself when you click on #channel again

    - this also can happen when you /join from a privmsg
      so it probably has to do with how the tabPage being inserted and not
      being shown right away messes with the WM_PAINT or something
      i really don't know

 - nickListBox gets resized back to nonzero when window is resized even
   though the PushButton will hide it again with 1 click maybe something like
   a "hidden" on the nickList and an event on MainWindow

 - nick with prefix e.g. @channelop should be without prefix in ACTION

 - unicode characters display in a shitty font make sure Universalia is
   used if the text isn't ascii  

 - we should ReleaseDC() after closing tabs 


FEATURES:

 - keyboard nav or some context menus at least
    - CTRL+T for a new nil CHATBOX_SERVER unless one exists
    - CTRL+(Shift)+Tab to cycle through tabs 
    - CTRL+F4 to close a tab
    future:
    - Esc to hide to tray
--------------------------------------------------------------------------------
 - topic widget should allow input and send /topic or whatever
 - after: replace topicInput with a RichEdit to display colors and links and
   stuff
    - *pukes*



UNSORTED:



--------------------------------------------------------------------------------
/mode needs to be able to send just the channel to get a reply of what the
mode is
ditto for /topic
--------------------------------------------------------------------------------
first run welcome message
--------------------------------------------------------------------------------
new server tab/connection abstraction
--------------------------------------------------------------------------------
whitespace or something to indicate where unread messages start
--------------------------------------------------------------------------------
CTCP messages should appear somewhere in UI
--------------------------------------------------------------------------------
highlight list
probably should compile regexp for that since its more complex
--------------------------------------------------------------------------------
better scripting examples
--------------------------------------------------------------------------------
autoload registered scripts at startup (config.json)
--------------------------------------------------------------------------------
/part without closing tab
 - chanState tracks whether "connected" to channel?
--------------------------------------------------------------------------------
split extra long text input, allow ctrl+enter, split on \n
i heard 512 bytes was maxlen
goirc uses 450
--------------------------------------------------------------------------------
/ignore
/unignore
--------------------------------------------------------------------------------
/invite
--------------------------------------------------------------------------------
/kickban
--------------------------------------------------------------------------------
/send 
proper file transfers with a Save As dialog and everything
unrelated: maybe turn tsobot into a XDCC bot
--------------------------------------------------------------------------------
inline twitter links
 - maybe use the API
 - maybe just scrape the HTML
--------------------------------------------------------------------------------
list of reasons to replace goirc with simple channels and goroutines 
that aren't NIH:
 - /reconnect is impossible for some reason to do with how goirc uses channels
 - logger interface is inconvenient
 - no convenient way to capture unhandled server messages 

list of reasons against:
 - it works
 - has anti-flooding stuff
 - line parsing might be harder than it looks
--------------------------------------------------------------------------------
replace walk with qt ... for version 2.0

list of reasons:
 - I want inline images for emojis and embedding thumbnails of pictures that 
   people link to
 - windows richedit is annoying
--------------------------------------------------------------------------------

colors
>>>>>> FIX YO SHIT #()!@# 
<<<<<< I MADE IT EVEN WORSE FUK U
 - write more test cases
 - strip control codes from other parts of the ui (like channel list)
 - SEND COLORS (todo) ideas:
    `red:no u`
 - unique random colors for nicks
 - themes

--------------------------------------------------------------------------------
middle-click to close tabs
scroll to cycle through tabs
context menu (close)
improve tabs in general
 - multiline, stretch-to-fit, button style
automatic tab sort order (alphabetical to start)
--------------------------------------------------------------------------------
/search or /find or CTRL+F
    reduce text buffer to matches, then restore
--------------------------------------------------------------------------------
/whois command (write to current tab)
--------------------------------------------------------------------------------
settings panel which writes to config.json
hot-loadable config.json
automatic NickServ stuff
 - IDEA(tso): dialog
    "Clickable links are disabled by default as a security precaution. 
                    You can enable them in Settings

                    [Yes I know don't show me this again]
    "
--------------------------------------------------------------------------------
limit message history (configurable)
--------------------------------------------------------------------------------
don't log messages if offline
don't display messages if not sent (or at least "previous message not sent"
!Undelivered
--------------------------------------------------------------------------------
system tray
 - icon
 - hide to tray
 - notifications on nickflash && !mainWindowFocused
--------------------------------------------------------------------------------
enable_caption(0)
 - transparency while we're at it? maybe that's too much...
--------------------------------------------------------------------------------
irc bouncer (separate project?)
 - use public/private key pairs for authentication or something
 - basically just a relay/proxy that PING/PONGs when the user isn't connected
 - stores messages while user isn't connected, dumps (user configurable
   amount) on reconnect
 - autoreply or maybe just (Away)!
 - *** this sort of thing might be against IRC network rules need to look into
   what the policy is and/or how znc does it so well
   or just use znc
--------------------------------------------------------------------------------
tab completion for commands might be nice
--------------------------------------------------------------------------------
hide join/parts should be optional for every channel not a global setting
--------------------------------------------------------------------------------
write autojoin on exit (as an option) (config.json)
--------------------------------------------------------------------------------
/version

░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░

RESOURCES:

IRC:
http://modern.ircdocs.horse/

About Tab Controls | Microsoft Docs
https://docs.microsoft.com/en-us/windows/desktop/Controls/tab-controls#tc_image_lists

Windows #define stuff:
https://doc.pcsoft.fr/en-US/?6510001
https://docs.microsoft.com/en-us/windows/desktop/WinProg/windows-data-types

RichEdit stuff:
https://docs.microsoft.com/en-us/windows/desktop/Controls/bumper-rich-edit-rich-edit-control-reference
https://docs.microsoft.com/en-us/windows/desktop/api/Richedit/ns-richedit-tagrichedit_image_parameters
https://docs.microsoft.com/en-us/windows/desktop/api/Richedit/ns-richedit-_charformat
https://github.com/Microsoft/Windows-classic-samples/blob/master/Samples/DynamicDPI/cpp/SampleRichEditControl.cpp
https://docs.microsoft.com/en-us/windows/desktop/Controls/em-geteditstyle
https://docs.microsoft.com/en-us/windows/desktop/Controls/em-seteventmask
https://docs.microsoft.com/en-us/windows/desktop/Controls/rich-edit-control-event-mask-flags
https://docs.microsoft.com/en-us/windows/desktop/Controls/em-geteditstyleex
https://github.com/Alexpux/mingw-w64/blob/master/mingw-w64-headers/include/richedit.h

Useful:
    open urls from command line in any OS:
https://www.dwheeler.com/essays/open-files-urls.html

    get tab key messages in windows:
http://forums.codeguru.com/showthread.php?60142-How-to-trap-WM_KILLFOCUS-with-Tab-key


▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒

ADDENDUM:

RE: inserting images in RichEdit

nvm OLE is exceptionally awful and I can't figure out how to get the
OBJECTPOSITIONS messages so fuck it if we want more out of the UI than pretty
colors there's always walk.WebView, electron, Qt, or reinventing the wheel
(render text and handle pointer events for text selection and put stuff on the
clipboard manually and invent a scrollbar and waste like a solid year on that)

-tso, July Sun Jul 8 07:49:26 2018 -0400

RE: ui

separate the concepts of messages that are written with chatbox.Println
for better notifications in tab title/statusbar/wherever

there are the following things sent to chatbox.Println:
    1) client messages (connecting, disconnected, command usage, etc...)
    2) error messages sent by server
    3) server messages that aren't errors
    4) joins/parts/topics/modes/other metadata
    5) NOTICE
    6) hard chats

we only really want the counter for 6
3 is kinda the same but it's distracting
some clients notify for 4 and it's kinda annoying
there should be a different, non-numerical indicator for 1, 2 and 5

I'm glad we had this talk

-tso, Sat Jul 7 01:31:25 2018 -0400
